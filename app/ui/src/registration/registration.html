<import from="../components/view/wizard-view"></import>
<import from="../components/stepper/stepper"></import>

<wizard-view>
    <stepper au-slot="stepper" steps.bind="[1,2,3,4,5]" completed-steps.bind="step"></stepper>
    <h1 if.bind="step === 0" au-slot="header" t="registration.title-step0">Register your company</h1>
    <form if.bind="step === 0" class="auth-form">
        <div class="information" t="confirmation.belgian-only">Currently, we only activate Belgian companies. Please contact us if you’d like support for other countries.</div>
        <div class="grid">
            <label class="field full">
                <span t="label.vat-number">VAT number</span>
                <input name="vatNumber" type="text" t="[placeholder]placeholder.vat-number" required value.bind="vatNumber"/>
            </label>
            <label class="field full">
                <span t="label.email">Email</span>
                <input name="email" type="email" t="[placeholder]placeholder.email" required value.bind="email"/>
            </label>
        </div>
        <p if.bind="errorCode" class="form-error" aria-live="assertive" t="error.${errorCode}">Login failed</p>
        <div class="auth-actions">
            <button type="submit" class="btn primary" disabled.bind="!email || !vatNumber || companyService.http.isRequesting" click.trigger="checkVatNumber()">
                <span class="loader"></span>
                <span t="registration.create-account">Create account</span>
            </button>
        </div>
        <p class="auth-alt"><span t="registration.already-registered">Already registered?</span> <a href="../login" t="login.action">Log in</a></p>
    </form>

    <h1 if.bind="step === 1" au-slot="header" t="registration.title-step1">Confirm your company</h1>
    <form if.bind="step === 1" class="auth-form" style="max-width: 400px">
        <div class="grid grid-col-73">
            <label class="field full">
                <span t="label.vat-number">VAT number</span>
                <input name="vatNumber" type="text" disabled="disabled" value.to-view="company.vatNumber"/>
            </label>
            <label class="field full">
                <span t="label.name">Name</span>
                <input name="companyName" type="text" disabled="disabled" value.to-view="company.name"/>
            </label>
            <label class="field">
                <span t="label.city">City</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.city"/>
            </label>
            <label class="field">
                <span t="label.postal-code">Postal Code</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.postalCode"/>
            </label>
            <label class="field full">
                <span t="label.street">Street</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.street"/>
            </label>
            <label class="field full">
                <span t="label.email">Email</span>
                <input name="email" type="email" t="[placeholder]placeholder.email" disabled="disabled" value.to-view="email"/>
            </label>
        </div>
        <p if.bind="errorCode" class="form-error" aria-live="assertive" t="error.${errorCode}">Login failed</p>
        <div class="auth-actions">
            <button type="button" class="btn primary" disabled.bind="!email || !vatNumber || companyService.http.isRequesting" click.trigger="confirmCompany()">
                <span t="registration.confirm-company">Confirm</span>
            </button>
        </div>
        <p class="auth-alt"><span t="registration.wrong-company">Wrong company?</span> <a href="#" click.trigger="restart($event)" t="registration.back">Back</a></p>
    </form>

    <h1 if.bind="step === 2" au-slot="header" t="registration.title-step2">Account verification</h1>
    <template if.bind="step === 2">
        <p t="registration.instructions-intro">We’ve sent you a confirmation email. Please also check your spam folder for a mail from @letspeppol.org.</p>
        <p t="registration.instructions-onboarding">Before you continue, complete the onboarding checklist to set up Web eID.</p>
        <button type="button" class="btn primary" click.trigger="goToOnboarding()" t="registration.instructions-go-checklist">Go to checklist</button>
        <p t="registration.instructions-finally"><b>Finally</b>, check your mails (maybe spam) and click on the verification link in the confirmation email</p>
    </template>
</wizard-view>
