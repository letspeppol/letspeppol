<import from="../components/view/wizard-view"></import>
<import from="../components/stepper/stepper"></import>

<wizard-view>
    <stepper au-slot="stepper" steps.bind="[1,2,3,4]" completed-steps.bind="step"></stepper>
    <h1 if.bind="step === 0" au-slot="header" t="registration.title-step0">Register your company</h1>
    <form if.bind="step === 0" class="auth-form">
        <div class="grid">
            <label class="field full">
                <span t="label.vat-number">VAT number</span>
                <input name="companyNumber" type="text" t="[placeholder]placeholder.vat-number" required value.bind="companyNumber"/>
            </label>
            <label class="field full">
                <span t="label.email">Email</span>
                <input name="email" type="email" t="[placeholder]placeholder.email" required value.bind="email"/>
            </label>
        </div>
        <p if.bind="errorCode" class="form-error" aria-live="assertive" t="error.${errorCode}">Login failed</p>
        <div class="auth-actions">
            <button type="submit" class="btn primary" disabled.bind="!email || !companyNumber || companyService.http.isRequesting" click.trigger="checkCompanyNumber()">
                <span class="loader"></span>
                <span t="registration.create-account">Create account</span>
            </button>
        </div>
        <p class="auth-alt"><span t="registration.already-registered">Already registered?</span> <a href="../login" t="login.action">Log in</a></p>
    </form>

    <h1 if.bind="step === 1" au-slot="header" t="registration.title-step1">Confirm your company</h1>
    <form if.bind="step === 1" class="auth-form" style="max-width: 400px">
        <div class="grid grid-col-73">
            <label class="field full">
                <span t="label.vat-number">VAT number</span>
                <input name="companyNumber" type="text" disabled="disabled" value.to-view="company.companyNumber"/>
            </label>
            <label class="field full">
                <span t="label.name">Name</span>
                <input name="companyName" type="text" disabled="disabled" value.to-view="company.name"/>
            </label>
            <label class="field">
                <span t="label.city">City</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.city"/>
            </label>
            <label class="field">
                <span t="label.postal-code">Postal Code</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.postalCode"/>
            </label>
            <label class="field">
                <span t="label.street">Street</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.street"/>
            </label>
            <label class="field">
                <span t="label.house-number">House Number</span>
                <input name="address" type="text" disabled="disabled" value.to-view="company.houseNumber"/>
            </label>
            <label class="field full">
                <span t="label.email">Email</span>
                <input name="email" type="email" t="[placeholder]placeholder.email" disabled="disabled" value.to-view="email"/>
            </label>
        </div>
        <p if.bind="errorCode" class="form-error" aria-live="assertive" t="error.${errorCode}">Login failed</p>
        <div class="auth-actions">
            <button type="button" class="btn primary" disabled.bind="!email || !companyNumber || companyService.http.isRequesting" click.trigger="confirmCompany()">
                <span t="registration.confirm-company">Confirm</span>
            </button>
        </div>
        <p class="auth-alt"><span t="registration.wrong-company">Wrong company?</span> <a href="#" click.trigger="restart($event)" t="registration.back">Back</a></p>
    </form>

    <h1 if.bind="step === 2" au-slot="header" t="registration.title-step2">Account verification</h1>
    <template if.bind="step === 2">
        <p t="registration.instructions-intro">A confirmation email has been sent. But first:</p>
        <ul>
            <li t="registration.instructions-install-plugin">Install the <b>web-eid plugin</b> via <a href="https://www.id.ee/en/article/install-id-software/">https://www.id.ee/en/article/install-id-software/</a></li>
            <li t="registration.instructions-install-extension">Make sure you install the browser extension, you can find the instructions on the same page</li>
            <li t="registration.instructions-restart-browser"><b>Restart your browser!</b></li>
            <li t="registration.instructions-test-plugin">Verify whether the plugin works <a href="https://www.id.ee/en/article/test-your-id-card/">here</a></li>
        </ul>
        <p t="registration.instructions-finally"><b>Finally</b>, check your mails and click on the verification link in the confirmation email</p>
    </template>
</wizard-view>
