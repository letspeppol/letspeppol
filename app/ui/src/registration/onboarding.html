<import from="../components/view/wizard-view"></import>
<import from="../components/eid/card-reader"></import>
<import from="./onboarding.css"></import>

<wizard-view>
    <h1 au-slot="header" t="onboarding.title">Onboarding</h1>

    <form class="auth-form">
        <div class="confirmation-layout">
            <div>
                <ol class="onboarding-steps">
                    <li class="onboarding-steps-item">
                        <a href="https://be.letspeppol.org/registration" target="_blank" rel="noopener noreferrer" t="onboarding.step.register-company">Register your company</a>
                    </li>
                    <li class="onboarding-steps-item">
                        <span t="onboarding.step.prepare-eid.title">Prepare your eID software, reader and card</span>
                        <ul class="onboarding-substeps">
                            <li>
                                <span t="onboarding.step.prepare-eid.install-web-eid">Install the Web eID application</span>
                                <span class="link-group">
                                    <a href="https://github.com/web-eid/web-eid-app/releases/download/v2.8.0/web-eid_2.8.0.913.x64.exe" target="_blank" rel="noopener noreferrer" t="onboarding.os.windows">Windows</a>
                                    <span t="onboarding.or">or</span>
                                    <a href="https://github.com/web-eid/web-eid-app/releases/download/v2.8.0/web-eid_2.8.0.710.dmg" target="_blank" rel="noopener noreferrer" t="onboarding.os.macos">macOS</a>
                                    <span t="onboarding.or">or</span>
                                    <a href="https://github.com/web-eid/web-eid-app/releases/tag/v2.8.0" target="_blank" rel="noopener noreferrer" t="onboarding.os.linux">Linux</a>
                                </span>
                                <p class="hint" t="onboarding.step.prepare-eid.alt-stack">Alternatively, you can install the full software stack from id.ee.</p>
                                <a class="hint-link" href="https://www.id.ee/en/article/install-id-software/" target="_blank" rel="noopener noreferrer" t="onboarding.step.prepare-eid.alt-stack-link">Open id.ee installation guide</a>
                            </li>
                            <li>
                                <span t="onboarding.step.prepare-eid.install-beidconnect">Ensure BeIDConnect is installed (Belgian eID middleware).</span>
                                <a href="https://eid.belgium.be/en/download/beidconnect" target="_blank" rel="noopener noreferrer" t="onboarding.step.prepare-eid.install-beidconnect-link">Download BeIDConnect</a>
                            </li>
                            <li>
                                <span t="onboarding.step.prepare-eid.restart-browser">Restart your browser and verify that the Web eID extension is enabled.</span>
                                <p class="hint" t="onboarding.step.prepare-eid.browser-help">Extension help:</p>
                                <span class="link-group">
                                    <a href="https://www.id.ee/en/article/install-id-software/#chrome" target="_blank" rel="noopener noreferrer" t="onboarding.browser.chrome">Chrome</a>,
                                    <a href="https://www.id.ee/en/article/install-id-software/#mozilla-firefox" target="_blank" rel="noopener noreferrer" t="onboarding.browser.firefox">Firefox</a>,
                                    <a href="https://www.id.ee/en/article/install-id-software/#safari" target="_blank" rel="noopener noreferrer" t="onboarding.browser.safari">Safari</a>,
                                    <a href="https://www.id.ee/en/article/install-id-software/#microsoft-edge" target="_blank" rel="noopener noreferrer" t="onboarding.browser.edge">Microsoft Edge</a>
                                </span>
                            </li>
                            <li t="onboarding.step.prepare-eid.test-setup">
                                Connect your eID reader, insert your eID card, and run the test on the right.
                            </li>
                        </ul>
                    </li>
                    <li class="onboarding-steps-item" t="onboarding.step.verify-email">
                        Verify your email address (check spam for emails from @letspeppol.org).
                    </li>
                    <li class="onboarding-steps-item" t="onboarding.step.verify-director">
                        Verify your identity as a company director.
                    </li>
                    <li class="onboarding-steps-item" t="onboarding.step.sign-contract">
                        Sign the contract to complete KYC (Know Your Customer).
                    </li>
                    <li class="onboarding-steps-item" t="onboarding.step.login">
                        Log in to your account.
                    </li>
                </ol>
            </div>

            <div class="vertical-separator"></div>

            <div>
                <h3 t="onboarding.check-title">Check your Web eID installation</h3>
                <card-reader caption-key="onboarding.anim-caption-sign" reader-label-key="onboarding.anim-reader-label"></card-reader>
                <button type="button" class="btn primary" click.trigger="checkWebEID()" t="onboarding.check">Check Web eID</button>

                <div class="onboarding-troubleshoot-block" if.bind="certificate == null || signatureAlgorithm == null">
                    <p class="hint" t="onboarding.step.prepare-eid.troubleshoot.title">If confirmation fails:</p>
                    <ul class="onboarding-troubleshoot">
                        <li t="onboarding.step.prepare-eid.troubleshoot.reinsert">
                            Remove the eID card and insert it again.
                        </li>
                        <li t="onboarding.step.prepare-eid.troubleshoot.usb">
                            Use a direct USB connection (avoid hubs/dongles).
                        </li>
                        <li t="onboarding.step.prepare-eid.troubleshoot.restart">
                            Restart your browser and try again.
                        </li>
                        <li t="onboarding.step.prepare-eid.troubleshoot.other-device">
                            Try another computer.
                        </li>
                        <li>
                            <span t="onboarding.step.prepare-eid.troubleshoot.contact">Contact support:</span>
                            <a href="mailto:support@letspeppol.org">support@letspeppol.org</a>
                        </li>
                    </ul>
                </div>
                <div class="onboarding-success-block" else>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="onboarding-success-icon lucide lucide-thumbs-up-icon lucide-thumbs-up"><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"/><path d="M7 10v12"/></svg>
                    <div class="onboarding-success-text">
                        <p class="onboarding-success-title" t="onboarding.step.prepare-eid.success.title">Web eID is working</p>
                        <p class="onboarding-success-subtitle" t="onboarding.step.prepare-eid.success.subtitle">Your card reader and browser setup look good.</p>
                    </div>
                </div>
            </div>
        </div>
    </form>
</wizard-view>
