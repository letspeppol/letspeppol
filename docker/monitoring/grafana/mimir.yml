apiVersion: 1

datasources:
  - name: Loki
    type: loki
    uid: loki
    access: proxy
    url: http://loki:3100
    editable: true
  - name: Mimir
    type: prometheus
    uid: mimir
    access: proxy
    url: http://mimir:9009/prometheus
    isDefault: true
    editable: true
    jsonData:
      httpMethod: POST
      timeInterval: 15s
      queryTimeout: 60s
      exemplarTraceIdDestinations:
        - datasourceUid: loki
      # MULTI-TENANCY (important!)
      prometheusType: mimir
      customQueryParameters: "tenant_id=1"

    secureJsonData:
      # If you use auth:
      # httpHeaderValue1: "Bearer <TOKEN>"
      # or: basicAuthPassword
      # leave empty for no auth
      httpHeaderValue1: ""

    # Enable passing a tenant header (supports Mimir topologies)
    basicAuth: false
    withCredentials: false
    httpHeaders:
      - name: X-Scope-OrgID
        value: "1"

# You can change "1" to:
#   "single-tenant" for single tenant mode
#   "teamX" if you want multi-team isolation
#   "prod" for production data separation